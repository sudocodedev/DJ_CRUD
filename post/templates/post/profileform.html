{% load static %}
{% load crispy_forms_tags %}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" integrity="sha512-z3gLpd7yknf1YoNbCzqRKc4qyor8gaKU1qmn+CShxbuBusANI9QpRohGBreCFkKxLhei6S9CQXFEbbKuqLg0DA==" crossorigin="anonymous" referrerpolicy="no-referrer" />
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Jost&family=Outfit:wght@300&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
    <link rel="stylesheet" href="{% static 'css/post.css' %}">
    <script defer src="{% static 'js/post.js' %}"></script>
    <title>Your Profile</title>
</head>
<body>
    <div class="container userprofile-form">
            {% if action == "edit" %}
                <h3 class="mt-4 mb-4 fw-bold text-center">Edit Profile</h3>
            {% else %}
                <h3 class="mt-4 mb-4 fw-bold text-center">Create Profile</h3>
            {% endif %}
            <form method="post" enctype="multipart/form-data">
                {% csrf_token %}
                {{ form.media }}
                <div class="profile-pic-container mb-4 mt-4">
                    {{form.profileImg}}
                    <label for="profile-pic-input" class="profile-pic">
                        {% if profile.profileImg.url %}
                            <img id="profile-pic-preview" src="{{ profile.profileImg.url }}" alt="profile picture">
                        {% else %}
                            <img id="profile-pic-preview" src="https://thumbs.dreamstime.com/b/default-avatar-profile-flat-icon-social-media-user-vector-portrait-unknown-human-image-default-avatar-profile-flat-icon-184330869.jpg" alt="profile picture">
                        {% endif %}
                        <span><i class="fa-solid fa-camera fa-2xl"></i></span>
                    </label>
                </div>
                <div class="row">
                    <div class="col-md-6 mb-3">
                        {{form.firstName|as_crispy_field}}
                    </div>
                    <div class="col-md-6 mb-3">
                        {{form.lastName|as_crispy_field}}
                    </div>
                </div>
                <div class="row">
                    <div class="col-md-6 mb-3">
                        {{form.location|as_crispy_field}}
                    </div>
                    <div class="col-md-6 mb-3">
                        {{form.pronoun|as_crispy_field}}
                    </div>
                </div>

                {{form.bio|as_crispy_field}}

                <div class="bg-pic-container mb-4 mt-4">
                    {{form.profileBackground}}
                    <label for="bg-pic-input" class="bg-pic">
                        {% if profile.profileBackground.url %}
                        <img id="bg-pic-preview" src="{{ profile.profileBackground.url }}" alt="profile bg pic">
                        {% else %}
                        <img id="bg-pic-preview" src="https://images.unsplash.com/photo-1564944062924-57874442ddea?q=80&w=1974&auto=format&fit=crop&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D" alt="bg picture">
                        {% endif %}
                        <span>Upload cover pic</span>
                    </label>
                </div>
                <div class="input-group mb-3 flex-nowrap">
                    <span><i class="fa-brands fa-instagram fa-2xl"></i></span>
                    {{form.instagram|as_crispy_field}}
                </div>
                <div class="input-group mb-3 flex-nowrap">
                    <span><i class="fa-brands fa-x-twitter fa-2xl"></i></span>
                    {{form.x|as_crispy_field}}
                </div>
                <div class="input-group mb-3 flex-nowrap">
                    <span><i class="fa-brands fa-github fa-2xl"></i></span>
                    {{form.github|as_crispy_field}}
                </div>
                <div class="input-group mb-3 flex-nowrap">
                    <span><i class="fa-brands fa-telegram fa-2xl"></i></span>
                    {{form.telegram|as_crispy_field}}
                </div>
                <button type="submit" class="mb-4 btn btn-success">Done</button>
                {% if action == "edit" %}
                <a href="{% url 'userprofile-view' profile.id %}" class='mb-4 ms-3 btn btn-danger'>Cancel</a>
                {% else %}
                <a href="{% url 'post-page' %}" class='mb-4 ms-3 btn btn-danger'>Cancel</a>
                {% endif %}
            </form>
    </div>
    
</body>
</html>